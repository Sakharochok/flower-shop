<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: frontend/js/cart.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: frontend/js/cart.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Class managing the shopping cart state using Local Storage.
 * @class
 * @name Cart
 */
export class Cart {
    #items;
    constructor() {
        this.#items = JSON.parse(localStorage.getItem('cart')) || [];
    }
      
    /**
     * Adds an item to the cart or increments its quantity.
     * @method
     * @param {Object} product - The product object (must have getName, getId, getPrice, etc.).
     * @param {number} [quantityToAdd=1] - The number of units to add.
     */
    getItems() {
        return this.#items;
    }

    saveCart() {
        localStorage.setItem('cart', JSON.stringify(this.#items));
    }

    addItem(product, quantityToAdd = 1) {
        const existingItem = this.#items.find(item => item.id === product.getId());
        
        if (existingItem) {
            existingItem.quantity += quantityToAdd;
        } else {
            this.#items.push({ 
                id: product.getId(), 
                name: product.getName(), 
                price: product.getPrice(), 
                quantity: quantityToAdd,
                image: typeof product.getImage === 'function' ? product.getImage() : '/images/placeholder.jpg' 
            });
        }
        this.saveCart();
    }
    /**
     * Calculates the total count of all items in the cart.
     * @returns {number} The total quantity of items.
     */
    getTotalItemsCount() {
        return this.#items.reduce((sum, item) => sum + item.quantity, 0);
    }

    /**
     * Calculates the total price of all items in the cart.
     * @returns {number} The total price.
     */
    getTotalPrice() {
        return this.#items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    }

    removeItem(productId) {
        this.#items = this.#items.filter(item => item.id != productId);
        this.saveCart();
    }
}

const cartInstance = new Cart();
const cartCountElement = document.getElementById('cart-count');

/**
 * Exports function to update the cart count displayed in the header UI.
 * @function
 */
export function updateCartCount() {
    if (cartCountElement) {
        cartCountElement.textContent = cartInstance.getTotalItemsCount();
    }
}
/**
 * Adds a product to the cart and notifies the user.
 * @function
 * @param {Object} product - The product object to add.
 * @param {number} [quantity=1] - Quantity to add.
 */
export function addToCart(product, quantity = 1) {
    cartInstance.addItem(product, quantity);
    updateCartCount();
    alert(`Item "${product.getName()}" (x${quantity}) added to cart!`);
}

export function renderCartItems() {
    const cartItemsList = document.getElementById('cart-items-list');
    const totalElement = document.getElementById('cart-total-price');
    const emptyMessage = document.getElementById('cart-empty-message');
    const buyButton = document.querySelector('.cart-header .buy-btn');

    if (!cartItemsList || !totalElement || !emptyMessage || !buyButton) {
        return;
    }

    cartItemsList.innerHTML = '';
    const items = cartInstance.getItems();

    if (items.length === 0) {
        emptyMessage.textContent = 'Your cart is empty.'; // (TRANSLATED)
        emptyMessage.style.display = 'block';
        buyButton.style.display = 'none';
    } else {
        emptyMessage.style.display = 'none';
        buyButton.style.display = 'block';

        items.forEach(item => {
            const itemElement = document.createElement('div');
            itemElement.className = 'cart-item-card';
            
            const itemTotalPrice = item.price * item.quantity;

            itemElement.innerHTML = `
                &lt;button class="remove-item-btn" data-id="${item.id}">
                    &lt;img src="/images/close.svg" alt="Remove">
                &lt;/button>
                
                &lt;img src="${item.image}" alt="${item.name}">
                &lt;div class="cart-item-info">
                    &lt;h3>${item.name}&lt;/h3>
                    &lt;p>${item.quantity} PIECES - ${itemTotalPrice} UAH&lt;/p> &lt;/div>
            `;
            cartItemsList.appendChild(itemElement);
        });
    }

    totalElement.textContent = cartInstance.getTotalPrice();

    document.querySelectorAll('.remove-item-btn').forEach(button => {
        button.addEventListener('click', (e) => {
            const buttonEl = e.currentTarget;
            const productId = buttonEl.dataset.id;
            cartInstance.removeItem(productId);
            renderCartItems();
            updateCartCount();
        });
    });
}

document.addEventListener('DOMContentLoaded', () => {
    updateCartCount();
    if (document.getElementById('cart-items-list')) {
        renderCartItems();
    }
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-builder_new.html">builder_new</a></li><li><a href="module-checkout.html">checkout</a></li><li><a href="module-details.html">details</a></li><li><a href="module-entities.html">entities</a></li><li><a href="module-main.html">main</a></li><li><a href="module-polymorphism-example.html">polymorphism-example</a></li><li><a href="module-products.html">products</a></li><li><a href="module-server.html">server</a></li></ul><h3>Classes</h3><ul><li><a href="Bouquet.html">Bouquet</a></li><li><a href="Bouquet_ShopItem.html">ShopItem</a></li><li><a href="Cart.html">Cart</a></li><li><a href="DecorItem.html">DecorItem</a></li><li><a href="DecorItem_ShopItem.html">ShopItem</a></li><li><a href="Flower.html">Flower</a></li><li><a href="Flower_ShopItem.html">ShopItem</a></li><li><a href="Graph.html">Graph</a></li><li><a href="Order.html">Order</a></li><li><a href="Order_Order.html">Order</a></li><li><a href="Payment.html">Payment</a></li><li><a href="Payment_Payment.html">Payment</a></li><li><a href="Shipping_Shipping.html">Shipping</a></li><li><a href="ShopItem.html">ShopItem</a></li><li><a href="ShopItem_ShopItem.html">ShopItem</a></li><li><a href="SpecialBouquet.html">SpecialBouquet</a></li><li><a href="SpecialBouquet_ShopItem.html">ShopItem</a></li><li><a href="Store.html">Store</a></li><li><a href="User.html">User</a></li><li><a href="User_User.html">User</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addToCart">addToCart</a></li><li><a href="global.html#createMasterGraph">createMasterGraph</a></li><li><a href="global.html#updateCartCount">updateCartCount</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Tue Nov 25 2025 19:51:07 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
