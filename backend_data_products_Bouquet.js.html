<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: backend/data/products/Bouquet.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: backend/data/products/Bouquet.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// backend/data/products/Bouquet.js

import { ShopItem } from './ShopItem.js';
import { Graph } from '../../utils/graph.js'; // Requires graph class
/**
 * Class representing a Bouquet, a collection of flowers.
 * @class
 * @extends ShopItem
 */
export class Bouquet extends ShopItem {
    #flowers;
    #isCustom;
    #mainColor;
    #season;
    /**
     * Creates a Bouquet instance.
     * @param {number} id - ID.
     * @param {string} name - Name.
     * @param {number} price - Price.
     * @param {string} image - Image path.
     * @param {Array&lt;Flower>} flowers - Array of Flower objects in the bouquet.
     * @param {string} [mainColor='Mixed'] - The dominant color.
     * @param {string} [season='All-Year'] - Seasonality.
     */
    constructor(id, name, price, image, flowers, mainColor, season) {
        super(id, name, price, image);
        this.#flowers = Array.isArray(flowers) ? flowers : [];
        this.#isCustom = false;
        this.#mainColor = mainColor || 'Mixed';
        this.#season = season || 'All-Year';
    }
    
    getMainColor() { return this.#mainColor; }
    getSeason() { return this.#season; }

    addFlower(flower) {
        this.#flowers.push(flower);
        this.#isCustom = true;
    }
    /**
     * Finds the Optimal Flower Connections using an MST algorithm (Kruskal or Prim).
     * @method
     * @param {Graph} graph - The master graph of all flower compatibilities.
     * @param {string} [algorithmName='Kruskal'] - The algorithm name ('Kruskal' or 'Prim').
     * @returns {Object} An object containing the MST results: { mst: Array, weight: number, algorithm: string }.
     */

    // (FIX) This is the confirmed working version of this function
    findOptimalFlowerConnections(graph, algorithmName = 'Kruskal') {
        // 1. Get the names of the flowers in *this* bouquet
        const flowerNames = this.#flowers.map(f => f.getName());

        if (flowerNames.length &lt; 2) {
            return { mst: [], weight: 0, algorithm: algorithmName };
        }

        // 2. Create a new, empty subgraph
        const subGraph = new Graph();
        
        // 3. Add only *our* flowers as vertices to the subgraph
        for (const name of flowerNames) {
            // Check if the flower name exists in the master graph before adding
            if (graph.getVertices().includes(name)) {
                subGraph.addVertex(name);
            }
        }

        // 4. Add only the relevant edges (that connect *our* flowers)
        for (const edge of graph.getEdges()) {
            if (flowerNames.includes(edge.v1) &amp;&amp; flowerNames.includes(edge.v2)) {
                subGraph.addEdge(edge.v1, edge.v2, edge.weight);
            }
        }

        // 5. Run Kruskal's algorithm *on the subgraph*
        // This will correctly return { mst: [], weight: 0 } if no edges were found
        let result = subGraph.kruskalMST(); 

        if (algorithmName === 'Prim' &amp;&amp; subGraph.getVertices().length > 0) {
           result = subGraph.primMST(subGraph.getVertices()[0]);
        }

        // 6. Return the result. result.weight will be 0 if no connections exist
        return { mst: result.mst, weight: result.weight, algorithm: algorithmName };
    }

    getDescription() {
        return `A beautiful pre-arranged collection of flowers.`;
    }
    
    getFlowers() {
      return this.#flowers;
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-builder_new.html">builder_new</a></li><li><a href="module-checkout.html">checkout</a></li><li><a href="module-details.html">details</a></li><li><a href="module-entities.html">entities</a></li><li><a href="module-main.html">main</a></li><li><a href="module-polymorphism-example.html">polymorphism-example</a></li><li><a href="module-products.html">products</a></li><li><a href="module-server.html">server</a></li></ul><h3>Classes</h3><ul><li><a href="Bouquet.html">Bouquet</a></li><li><a href="Bouquet_ShopItem.html">ShopItem</a></li><li><a href="Cart.html">Cart</a></li><li><a href="DecorItem.html">DecorItem</a></li><li><a href="DecorItem_ShopItem.html">ShopItem</a></li><li><a href="Flower.html">Flower</a></li><li><a href="Flower_ShopItem.html">ShopItem</a></li><li><a href="Graph.html">Graph</a></li><li><a href="Order.html">Order</a></li><li><a href="Order_Order.html">Order</a></li><li><a href="Payment.html">Payment</a></li><li><a href="Payment_Payment.html">Payment</a></li><li><a href="Shipping_Shipping.html">Shipping</a></li><li><a href="ShopItem.html">ShopItem</a></li><li><a href="ShopItem_ShopItem.html">ShopItem</a></li><li><a href="SpecialBouquet.html">SpecialBouquet</a></li><li><a href="SpecialBouquet_ShopItem.html">ShopItem</a></li><li><a href="Store.html">Store</a></li><li><a href="User.html">User</a></li><li><a href="User_User.html">User</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addToCart">addToCart</a></li><li><a href="global.html#createMasterGraph">createMasterGraph</a></li><li><a href="global.html#updateCartCount">updateCartCount</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Tue Nov 25 2025 21:52:16 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
